<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>SavePlan Pro - Smart Financial Calculator</title>
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <style>
            :root {
                --primary: #6366f1;
                --primary-dark: #4f46e5;
                --secondary: #10b981;
                --danger: #ef4444;
                --warning: #f59e0b;
                --bg-primary: #ffffff;
                --bg-secondary: #f8fafc;
                --bg-tertiary: #f1f5f9;
                --text-primary: #1e293b;
                --text-secondary: #64748b;
                --text-muted: #94a3b8;
                --border: #e2e8f0;
                --shadow:
                    0 1px 3px 0 rgb(0 0 0 / 0.1),
                    0 1px 2px -1px rgb(0 0 0 / 0.1);
                --shadow-lg:
                    0 10px 15px -3px rgb(0 0 0 / 0.1),
                    0 4px 6px -4px rgb(0 0 0 / 0.1);
                --radius: 12px;
                --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }

            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family:
                    "Inter",
                    system-ui,
                    -apple-system,
                    sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                color: var(--text-primary);
                line-height: 1.6;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 2rem;
                min-height: 100vh;
                display: flex;
                flex-direction: column;
                gap: 2rem;
            }

            .header {
                text-align: center;
                color: white;
                margin-bottom: 1rem;
            }

            .header h1 {
                font-size: 3rem;
                font-weight: 700;
                margin-bottom: 0.5rem;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 1rem;
            }

            .header p {
                font-size: 1.2rem;
                opacity: 0.9;
                font-weight: 300;
            }

            .main-content {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 2rem;
                flex: 1;
            }

            .card {
                background: var(--bg-primary);
                border-radius: var(--radius);
                padding: 2rem;
                box-shadow: var(--shadow-lg);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                transition: var(--transition);
            }

            .card:hover {
                transform: translateY(-4px);
                box-shadow:
                    0 20px 25px -5px rgb(0 0 0 / 0.1),
                    0 8px 10px -6px rgb(0 0 0 / 0.1);
            }

            .card h2 {
                font-size: 1.5rem;
                font-weight: 600;
                margin-bottom: 1.5rem;
                color: var(--text-primary);
                display: flex;
                align-items: center;
                gap: 0.75rem;
            }

            .card h2 svg {
                width: 24px;
                height: 24px;
                color: var(--primary);
            }

            .input-group {
                margin-bottom: 1.5rem;
            }

            .input-group label {
                display: block;
                font-weight: 500;
                margin-bottom: 0.5rem;
                color: var(--text-primary);
                font-size: 0.9rem;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .input-group label svg {
                width: 16px;
                height: 16px;
                color: var(--text-secondary);
            }

            .input-wrapper {
                position: relative;
            }

            .input-wrapper input {
                width: 100%;
                padding: 0.75rem 1rem;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 1rem;
                font-family: inherit;
                transition: var(--transition);
                background: var(--bg-secondary);
            }

            .input-wrapper input:focus {
                outline: none;
                border-color: var(--primary);
                box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
            }

            .input-suffix {
                position: absolute;
                right: 1rem;
                top: 50%;
                transform: translateY(-50%);
                color: var(--text-muted);
                font-weight: 500;
                pointer-events: none;
            }

            .input-wrapper input.with-suffix {
                padding-right: 3rem;
            }

            .toggle-section {
                margin-bottom: 1.5rem;
                padding: 1rem;
                background: var(--bg-tertiary);
                border-radius: 8px;
                border: 1px solid var(--border);
            }

            .toggle-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-bottom: 1rem;
            }

            .toggle-header h3 {
                font-size: 1rem;
                font-weight: 600;
                color: var(--text-primary);
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .toggle-switch {
                position: relative;
                width: 50px;
                height: 24px;
                background: var(--border);
                border-radius: 12px;
                cursor: pointer;
                transition: var(--transition);
            }

            .toggle-switch.active {
                background: var(--primary);
            }

            .toggle-switch::after {
                content: "";
                position: absolute;
                top: 2px;
                left: 2px;
                width: 20px;
                height: 20px;
                background: white;
                border-radius: 50%;
                transition: var(--transition);
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            }

            .toggle-switch.active::after {
                transform: translateX(26px);
            }

            .income-earner {
                background: white;
                border: 1px solid var(--border);
                border-radius: 8px;
                padding: 1rem;
                margin-bottom: 1rem;
                transition: var(--transition);
            }

            .income-earner:hover {
                border-color: var(--primary);
            }

            .earner-header {
                display: flex;
                align-items: center;
                justify-content: between;
                margin-bottom: 1rem;
            }

            .earner-title {
                font-weight: 500;
                color: var(--text-primary);
                display: flex;
                align-items: center;
                gap: 0.5rem;
                flex: 1;
            }

            .remove-earner {
                background: none;
                border: none;
                color: var(--danger);
                cursor: pointer;
                padding: 0.25rem;
                border-radius: 4px;
                transition: var(--transition);
            }

            .remove-earner:hover {
                background: rgba(239, 68, 68, 0.1);
            }

            .add-earner-btn {
                background: var(--primary);
                color: white;
                border: none;
                padding: 0.75rem 1rem;
                border-radius: 8px;
                font-family: inherit;
                font-weight: 500;
                cursor: pointer;
                transition: var(--transition);
                display: flex;
                align-items: center;
                gap: 0.5rem;
                width: 100%;
                justify-content: center;
            }

            .add-earner-btn:hover {
                background: var(--primary-dark);
                transform: translateY(-1px);
            }

            .results-card {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
            }

            .results-card h2 {
                color: white;
            }

            .results-card h2 svg {
                color: white;
            }

            .result-item {
                background: rgba(255, 255, 255, 0.1);
                padding: 1rem;
                border-radius: 8px;
                margin-bottom: 1rem;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                transition: var(--transition);
            }

            .result-item:hover {
                background: rgba(255, 255, 255, 0.15);
                transform: scale(1.02);
            }

            .result-label {
                font-size: 0.9rem;
                opacity: 0.8;
                margin-bottom: 0.25rem;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .result-label svg {
                width: 16px;
                height: 16px;
            }

            .result-value {
                font-size: 1.5rem;
                font-weight: 600;
            }

            .result-value.large {
                font-size: 2rem;
            }

            .status-indicator {
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
            }

            .status-indicator svg {
                width: 16px;
                height: 16px;
            }

            .status-good {
                color: var(--secondary);
            }
            .status-warning {
                color: var(--warning);
            }
            .status-danger {
                color: var(--danger);
            }

            .chart-container {
                grid-column: span 2;
                height: 400px;
                position: relative;
            }

            .tabs {
                display: flex;
                background: var(--bg-tertiary);
                border-radius: 8px;
                padding: 4px;
                margin-bottom: 1rem;
            }

            .tab {
                flex: 1;
                background: none;
                border: none;
                padding: 0.75rem;
                border-radius: 6px;
                font-family: inherit;
                font-weight: 500;
                cursor: pointer;
                transition: var(--transition);
                color: var(--text-secondary);
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
            }

            .tab svg {
                width: 16px;
                height: 16px;
            }

            .tab.active {
                background: white;
                color: var(--text-primary);
                box-shadow: var(--shadow);
            }

            .progress-bar {
                background: var(--bg-tertiary);
                border-radius: 8px;
                overflow: hidden;
                height: 8px;
                margin: 0.5rem 0;
            }

            .progress-fill {
                background: linear-gradient(
                    90deg,
                    var(--primary),
                    var(--secondary)
                );
                height: 100%;
                border-radius: 8px;
                transition: width 0.5s ease;
            }

            .tips-section {
                grid-column: span 2;
                background: linear-gradient(135deg, #fef3c7, #fcd34d);
                color: #92400e;
            }

            .tips-section h2 {
                color: #92400e;
            }

            .tips-section h2 svg {
                color: #f59e0b;
            }

            .tip-item {
                background: rgba(255, 255, 255, 0.7);
                padding: 1rem;
                border-radius: 8px;
                margin-bottom: 0.5rem;
                display: flex;
                align-items: flex-start;
                gap: 0.75rem;
            }

            .tip-icon {
                width: 24px;
                height: 24px;
                background: #fbbf24;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-shrink: 0;
                margin-top: 0.125rem;
            }

            .tip-icon svg {
                width: 14px;
                height: 14px;
                color: white;
            }

            @media (max-width: 768px) {
                .container {
                    padding: 1rem;
                }

                .main-content {
                    grid-template-columns: 1fr;
                }

                .chart-container {
                    grid-column: span 1;
                }

                .tips-section {
                    grid-column: span 1;
                }

                .header h1 {
                    font-size: 2rem;
                }
            }

            .animate-in {
                animation: slideInUp 0.6s ease-out;
            }

            @keyframes slideInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .pulse {
                animation: pulse 2s infinite;
            }

            @keyframes pulse {
                0%,
                100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0.7;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header animate-in">
                <h1>
                    <svg
                        width="40"
                        height="40"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <circle cx="8" cy="21" r="1" />
                        <circle cx="19" cy="21" r="1" />
                        <path
                            d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57L22 6H7"
                        />
                        <path d="m7 13 5 5 5-5" />
                        <path d="m12 18V8" />
                    </svg>
                    SavePlan Pro
                </h1>
                <p>Smart Financial Planning Made Simple</p>
            </div>

            <div class="main-content">
                <div class="card animate-in">
                    <h2>
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <path
                                d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"
                            />
                            <rect
                                width="8"
                                height="4"
                                x="8"
                                y="2"
                                rx="1"
                                ry="1"
                            />
                        </svg>
                        Financial Goals
                    </h2>

                    <div class="input-group">
                        <label for="goal">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path d="M12 2v20" />
                                <path
                                    d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"
                                />
                            </svg>
                            Goal Amount
                        </label>
                        <div class="input-wrapper">
                            <input
                                type="number"
                                id="goal"
                                value="1000000"
                                class="with-suffix"
                            />
                            <span class="input-suffix">SEK</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="current">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <rect
                                    width="20"
                                    height="14"
                                    x="2"
                                    y="5"
                                    rx="2"
                                />
                                <line x1="2" x2="22" y1="10" y2="10" />
                            </svg>
                            Already Saved
                        </label>
                        <div class="input-wrapper">
                            <input
                                type="number"
                                id="current"
                                value="200000"
                                class="with-suffix"
                            />
                            <span class="input-suffix">SEK</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="months">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <circle cx="12" cy="12" r="10" />
                                <polyline points="12,6 12,12 16,14" />
                            </svg>
                            Timeframe
                        </label>
                        <div class="input-wrapper">
                            <input
                                type="number"
                                id="months"
                                value="36"
                                class="with-suffix"
                            />
                            <span class="input-suffix">months</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="roi">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <polyline
                                    points="22,12 18,12 15,21 9,3 6,12 2,12"
                                />
                            </svg>
                            Expected Annual ROI
                        </label>
                        <div class="input-wrapper">
                            <input
                                type="number"
                                id="roi"
                                value="5"
                                step="0.1"
                                class="with-suffix"
                            />
                            <span class="input-suffix">%</span>
                        </div>
                    </div>
                </div>

                <div class="card animate-in">
                    <h2>
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <path
                                d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"
                            />
                            <circle cx="9" cy="7" r="4" />
                            <path d="M22 21v-2a4 4 0 0 0-3-3.87" />
                            <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                        </svg>
                        Income Details
                    </h2>

                    <div class="toggle-section">
                        <div class="toggle-header">
                            <h3>
                                <svg
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <path
                                        d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"
                                    />
                                    <circle cx="9" cy="7" r="4" />
                                    <path d="M22 21v-2a4 4 0 0 0-3-3.87" />
                                    <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                                </svg>
                                Multiple Income Earners
                            </h3>
                            <div
                                class="toggle-switch"
                                id="multipleEarnersToggle"
                                onclick="toggleMultipleEarners()"
                            ></div>
                        </div>

                        <div id="incomeEarners">
                            <div class="income-earner" data-earner="0">
                                <div class="earner-header">
                                    <div class="earner-title">
                                        <svg
                                            width="16"
                                            height="16"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            stroke="currentColor"
                                            stroke-width="2"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        >
                                            <path
                                                d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"
                                            />
                                            <circle cx="12" cy="7" r="4" />
                                        </svg>
                                        Your Monthly Income
                                    </div>
                                </div>
                                <div class="input-wrapper">
                                    <input
                                        type="number"
                                        class="income-input with-suffix"
                                        value="39000"
                                        data-earner="0"
                                    />
                                    <span class="input-suffix">SEK</span>
                                </div>
                            </div>
                        </div>

                        <button
                            class="add-earner-btn"
                            id="addEarnerBtn"
                            onclick="addIncomeEarner()"
                            style="display: none"
                        >
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path d="M5 12h14" />
                                <path d="M12 5v14" />
                            </svg>
                            Add Income Earner
                        </button>
                    </div>

                    <div class="input-group">
                        <label for="expenses">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <circle cx="8" cy="21" r="1" />
                                <circle cx="19" cy="21" r="1" />
                                <path
                                    d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57L22 6H7"
                                />
                            </svg>
                            Monthly Expenses (Optional)
                        </label>
                        <div class="input-wrapper">
                            <input
                                type="number"
                                id="expenses"
                                value="45000"
                                class="with-suffix"
                            />
                            <span class="input-suffix">SEK</span>
                        </div>
                    </div>
                </div>

                <div class="card results-card animate-in">
                    <h2>
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <polyline
                                points="22,12 18,12 15,21 9,3 6,12 2,12"
                            />
                        </svg>
                        Results
                    </h2>

                    <div class="result-item">
                        <div class="result-label">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <rect
                                    width="20"
                                    height="14"
                                    x="2"
                                    y="5"
                                    rx="2"
                                />
                                <line x1="2" x2="22" y1="10" y2="10" />
                            </svg>
                            Required Monthly Saving
                        </div>
                        <div class="result-value large" id="monthlySaving">
                            0 SEK
                        </div>
                    </div>

                    <div class="result-item">
                        <div class="result-label">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path
                                    d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"
                                />
                                <circle cx="9" cy="7" r="4" />
                                <path d="M22 21v-2a4 4 0 0 0-3-3.87" />
                                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                            </svg>
                            Total Household Income
                        </div>
                        <div class="result-value" id="householdIncome">
                            0 SEK
                        </div>
                    </div>

                    <div class="result-item">
                        <div class="result-label">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <line x1="12" x2="12" y1="1" y2="23" />
                                <path
                                    d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"
                                />
                            </svg>
                            Available After Expenses
                        </div>
                        <div class="result-value" id="availableIncome">
                            0 SEK
                        </div>
                    </div>

                    <div class="result-item">
                        <div class="result-label">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <circle cx="12" cy="12" r="10" />
                                <path d="M8 14s1.5 2 4 2 4-2 4-2" />
                                <line x1="9" x2="9.01" y1="9" y2="9" />
                                <line x1="15" x2="15.01" y1="9" y2="9" />
                            </svg>
                            Savings Rate
                        </div>
                        <div class="result-value" id="savingsRate">0%</div>
                    </div>

                    <div class="result-item">
                        <div class="result-label">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path d="M9 12l2 2 4-4" />
                                <path
                                    d="M21 12c.552 0 1.447-.715 1.447-1.5S21.552 9 21 9s-1.447.715-1.447 1.5S20.448 12 21 12z"
                                />
                                <path
                                    d="M11.5 7H6a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h5.5"
                                />
                                <path d="M21 12H10" />
                            </svg>
                            Goal Achievement
                        </div>
                        <div class="result-value" id="goalStatus">
                            <span class="status-indicator status-good">
                                <svg
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <path d="M9 12l2 2 4-4" />
                                    <circle cx="12" cy="12" r="10" />
                                </svg>
                                <span id="statusText">On Track</span>
                            </span>
                        </div>
                    </div>
                </div>

                <div class="card animate-in">
                    <h2>
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <path d="M9 12l2 2 4-4" />
                            <path
                                d="M21 12c.552 0 1.447-.715 1.447-1.5S21.552 9 21 9s-1.447.715-1.447 1.5S20.448 12 21 12z"
                            />
                            <path
                                d="M11.5 7H6a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h5.5"
                            />
                            <path d="M21 12H10" />
                        </svg>
                        Projection
                    </h2>

                    <div class="tabs">
                        <button
                            class="tab active"
                            onclick="switchTab('growth')"
                        >
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <polyline
                                    points="22,12 18,12 15,21 9,3 6,12 2,12"
                                />
                            </svg>
                            Growth Chart
                        </button>
                        <button class="tab" onclick="switchTab('breakdown')">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <circle cx="12" cy="12" r="10" />
                                <path d="M9 12l2 2 4-4" />
                            </svg>
                            Breakdown
                        </button>
                    </div>

                    <div id="tabContent">
                        <div class="result-item">
                            <div class="result-label">
                                <svg
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <polyline
                                        points="22,12 18,12 15,21 9,3 6,12 2,12"
                                    />
                                </svg>
                                Future Value with ROI
                            </div>
                            <div class="result-value" id="futureValue">
                                0 SEK
                            </div>
                        </div>

                        <div class="result-item">
                            <div class="result-label">
                                <svg
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <rect
                                        width="20"
                                        height="14"
                                        x="2"
                                        y="5"
                                        rx="2"
                                    />
                                    <line x1="2" x2="22" y1="10" y2="10" />
                                </svg>
                                Total Contributions
                            </div>
                            <div class="result-value" id="totalContributions">
                                0 SEK
                            </div>
                        </div>

                        <div class="result-item">
                            <div class="result-label">
                                <svg
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <polyline
                                        points="22,12 18,12 15,21 9,3 6,12 2,12"
                                    />
                                </svg>
                                Interest Earned
                            </div>
                            <div class="result-value" id="interestEarned">
                                0 SEK
                            </div>
                        </div>

                        <div class="result-item">
                            <div class="result-label">
                                <svg
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <circle cx="12" cy="12" r="10" />
                                    <polyline points="12,6 12,12 16,14" />
                                </svg>
                                Time to Goal
                            </div>
                            <div class="result-value" id="timeToGoal">
                                36 months
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card chart-container animate-in">
                    <canvas id="savingsChart"></canvas>
                </div>

                <div class="card tips-section animate-in">
                    <h2>
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <circle cx="12" cy="12" r="10" />
                            <path d="m9 12 2 2 4-4" />
                        </svg>
                        Smart Tips
                    </h2>
                    <div id="tipsContainer">
                        <!-- Tips will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <script>
            lucide.createIcons();

            let chart = null;
            let earnerCount = 1;
            let isMultipleEarners = false;

            const formatters = {
                currency: new Intl.NumberFormat("sv-SE", {
                    style: "currency",
                    currency: "SEK",
                    maximumFractionDigits: 0,
                }),
                percent: new Intl.NumberFormat("sv-SE", {
                    style: "percent",
                    minimumFractionDigits: 1,
                    maximumFractionDigits: 1,
                }),
            };

            function formatCurrency(num) {
                return formatters.currency.format(num);
            }

            function formatPercent(num) {
                return formatters.percent.format(num / 100);
            }

            function getInputValue(id) {
                return parseFloat(document.getElementById(id).value) || 0;
            }

            function getAllIncomes() {
                const incomeInputs = document.querySelectorAll(".income-input");
                let total = 0;
                incomeInputs.forEach((input) => {
                    total += parseFloat(input.value) || 0;
                });
                return total;
            }

            function toggleMultipleEarners() {
                const toggle = document.getElementById("multipleEarnersToggle");
                const addBtn = document.getElementById("addEarnerBtn");

                isMultipleEarners = !isMultipleEarners;
                toggle.classList.toggle("active", isMultipleEarners);

                if (isMultipleEarners) {
                    addBtn.style.display = "flex";
                    // Update the first earner's title
                    const firstEarner = document.querySelector(".earner-title");
                    firstEarner.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        Income Earner 1
                    `;
                } else {
                    addBtn.style.display = "none";
                    // Remove additional earners
                    const earners = document.querySelectorAll(".income-earner");
                    earners.forEach((earner, index) => {
                        if (index > 0) {
                            earner.remove();
                        }
                    });
                    earnerCount = 1;

                    // Reset first earner title
                    const firstEarner = document.querySelector(".earner-title");
                    firstEarner.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        Your Monthly Income
                    `;
                }

                lucide.createIcons();
                calculate();
            }

            function addIncomeEarner() {
                const container = document.getElementById("incomeEarners");
                const newEarner = document.createElement("div");
                newEarner.className = "income-earner";
                newEarner.setAttribute("data-earner", earnerCount);

                newEarner.innerHTML = `
                    <div class="earner-header">
                        <div class="earner-title">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                                <circle cx="9" cy="7" r="4"/>
                                <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                            </svg>
                            Income Earner ${earnerCount + 1}
                        </div>
                        <button class="remove-earner" onclick="removeIncomeEarner(${earnerCount})">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M18 6 6 18"/>
                                <path d="m6 6 12 12"/>
                            </svg>
                        </button>
                    </div>
                    <div class="input-wrapper">
                        <input type="number" class="income-input with-suffix" value="25000" data-earner="${earnerCount}">
                        <span class="input-suffix">SEK</span>
                    </div>
                `;

                container.appendChild(newEarner);
                earnerCount++;

                // Add event listener to new input
                const newInput = newEarner.querySelector(".income-input");
                newInput.addEventListener("input", calculate);

                lucide.createIcons();
                calculate();
            }

            function removeIncomeEarner(earnerId) {
                const earner = document.querySelector(
                    `[data-earner="${earnerId}"]`,
                );
                if (earner) {
                    earner.remove();
                    calculate();
                }
            }

            function updateProgress() {
                const goal = getInputValue("goal");
                const current = getInputValue("current");
                const progress = Math.min((current / goal) * 100, 100);
                document.getElementById("progressFill").style.width =
                    `${progress}%`;
            }

            function generateTips(data) {
                const tips = [];
                const { savingsRate, surplus, months, roi } = data;

                if (savingsRate > 50) {
                    tips.push({
                        icon: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="m12 17 .01 0"/></svg>`,
                        text: "Your savings rate is very high. Consider if this is sustainable long-term.",
                    });
                } else if (savingsRate < 10) {
                    tips.push({
                        icon: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22,12 18,12 15,21 9,3 6,12 2,12"/></svg>`,
                        text: "Try to increase your savings rate to at least 10% for better financial health.",
                    });
                }

                if (surplus < 0) {
                    tips.push({
                        icon: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>`,
                        text: "Your goal requires more than your available income. Consider adjusting your timeline or goal amount.",
                    });
                } else if (surplus < 5000) {
                    tips.push({
                        icon: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>`,
                        text: "You'll have limited emergency funds. Consider building an emergency buffer.",
                    });
                }

                if (roi < 3) {
                    tips.push({
                        icon: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>`,
                        text: "Consider higher-yield investment options to boost your returns.",
                    });
                } else if (roi > 8) {
                    tips.push({
                        icon: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 12l2 2 4-4"/><path d="M21 12c.552 0 1.447-.715 1.447-1.5S21.552 9 21 9s-1.447.715-1.447 1.5S20.448 12 21 12z"/><path d="M11.5 7H6a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h5.5"/><path d="M21 12H10"/></svg>`,
                        text: "High ROI expectations carry more risk. Ensure you're comfortable with volatility.",
                    });
                }

                if (months > 60) {
                    tips.push({
                        icon: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 12l2 2 4-4"/><path d="M21 12c.552 0 1.447-.715 1.447-1.5S21.552 9 21 9s-1.447.715-1.447 1.5S20.448 12 21 12z"/><path d="M11.5 7H6a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h5.5"/><path d="M21 12H10"/></svg>`,
                        text: "Long-term goals benefit from compound growth. Stay consistent with your contributions.",
                    });
                }

                tips.push({
                    icon: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>`,
                    text: "Review and adjust your plan quarterly to stay on track.",
                });

                const container = document.getElementById("tipsContainer");
                container.innerHTML = tips
                    .map(
                        (tip) => `
                    <div class="tip-item">
                        <div class="tip-icon">${tip.icon}</div>
                        <div>${tip.text}</div>
                    </div>
                `,
                    )
                    .join("");
            }

            function updateChart(data) {
                const ctx = document
                    .getElementById("savingsChart")
                    .getContext("2d");

                if (chart) {
                    chart.destroy();
                }

                const months = Array.from(
                    { length: data.months + 1 },
                    (_, i) => i,
                );
                const balances = months.map((month) => {
                    if (month === 0) return data.current;

                    const monthlyContribution = data.requiredMonthly;
                    const monthlyRate = data.roi / 100 / 12;

                    let balance = data.current;
                    for (let i = 1; i <= month; i++) {
                        balance =
                            balance * (1 + monthlyRate) + monthlyContribution;
                    }
                    return balance;
                });

                chart = new Chart(ctx, {
                    type: "line",
                    data: {
                        labels: months.map((m) => (m === 0 ? "Now" : `${m}m`)),
                        datasets: [
                            {
                                label: "Projected Balance",
                                data: balances,
                                borderColor: "#6366f1",
                                backgroundColor: "rgba(99, 102, 241, 0.1)",
                                fill: true,
                                tension: 0.3,
                                pointBackgroundColor: "#6366f1",
                                pointBorderColor: "#ffffff",
                                pointBorderWidth: 2,
                                pointRadius: 4,
                            },
                            {
                                label: "Goal",
                                data: months.map(() => data.goal),
                                borderColor: "#10b981",
                                borderDash: [5, 5],
                                fill: false,
                                pointRadius: 0,
                            },
                        ],
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: "top",
                            },
                            title: {
                                display: true,
                                text: "Savings Growth Projection",
                            },
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function (value) {
                                        return formatCurrency(value);
                                    },
                                },
                            },
                        },
                        interaction: {
                            intersect: false,
                            mode: "index",
                        },
                        elements: {
                            point: {
                                hoverRadius: 8,
                            },
                        },
                    },
                });
            }

            function calculate() {
                const goal = getInputValue("goal");
                const current = getInputValue("current");
                const months = getInputValue("months");
                const totalIncome = getAllIncomes();
                const expenses = getInputValue("expenses");
                const roi = getInputValue("roi");

                const remaining = goal - current;
                const requiredMonthly = remaining / months;
                const availableIncome = totalIncome - expenses;
                const surplus = availableIncome - requiredMonthly;
                const savingsRate =
                    totalIncome > 0 ? (requiredMonthly / totalIncome) * 100 : 0;

                // Calculate future value with compound interest
                const monthlyRate = roi / 100 / 12;
                let futureValue;
                if (monthlyRate > 0) {
                    futureValue =
                        current * Math.pow(1 + monthlyRate, months) +
                        requiredMonthly *
                            ((Math.pow(1 + monthlyRate, months) - 1) /
                                monthlyRate);
                } else {
                    futureValue = current + requiredMonthly * months;
                }

                const totalContributions = requiredMonthly * months;
                const interestEarned =
                    futureValue - current - totalContributions;

                // Update UI
                document.getElementById("monthlySaving").textContent =
                    formatCurrency(requiredMonthly);
                document.getElementById("householdIncome").textContent =
                    formatCurrency(totalIncome);
                document.getElementById("availableIncome").textContent =
                    formatCurrency(availableIncome);
                document.getElementById("savingsRate").textContent =
                    formatPercent(savingsRate);
                document.getElementById("futureValue").textContent =
                    formatCurrency(futureValue);
                document.getElementById("totalContributions").textContent =
                    formatCurrency(totalContributions);
                document.getElementById("interestEarned").textContent =
                    formatCurrency(interestEarned);
                document.getElementById("timeToGoal").textContent =
                    `${months} months`;

                // Update status
                const statusEl = document.getElementById("goalStatus");
                const statusTextEl = document.getElementById("statusText");
                const statusIndicator =
                    statusEl.querySelector(".status-indicator");

                if (surplus < 0) {
                    statusIndicator.className =
                        "status-indicator status-danger";
                    statusIndicator.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="15" x2="9" y1="9" y2="15"/>
                            <line x1="9" x2="15" y1="9" y2="15"/>
                        </svg>
                        <span id="statusText">Needs Adjustment</span>
                    `;
                } else if (surplus < totalIncome * 0.1) {
                    statusIndicator.className =
                        "status-indicator status-warning";
                    statusIndicator.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                            <path d="M12 9v4"/>
                            <path d="m12 17 .01 0"/>
                        </svg>
                        <span id="statusText">Tight Budget</span>
                    `;
                } else {
                    statusIndicator.className = "status-indicator status-good";
                    statusIndicator.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 12l2 2 4-4"/>
                            <circle cx="12" cy="12" r="10"/>
                        </svg>
                        <span id="statusText">On Track</span>
                    `;
                }

                updateProgress();

                const data = {
                    goal,
                    current,
                    months,
                    requiredMonthly,
                    totalIncome,
                    availableIncome,
                    surplus,
                    savingsRate,
                    roi,
                    futureValue,
                };

                updateChart(data);
                generateTips(data);
            }

            function switchTab(tab) {
                // Update tab buttons
                document
                    .querySelectorAll(".tab")
                    .forEach((t) => t.classList.remove("active"));
                event.target.classList.add("active");
                // This is a placeholder for tab switching functionality
            }

            // Event listeners
            document.addEventListener("DOMContentLoaded", () => {
                // Add event listeners to all inputs
                document.querySelectorAll("input").forEach((input) => {
                    input.addEventListener("input", calculate);
                });

                // Stagger animations
                const cards = document.querySelectorAll(".animate-in");
                cards.forEach((card, index) => {
                    card.style.animationDelay = `${index * 0.1}s`;
                });

                // Initial calculation
                calculate();

                // Initialize Lucide icons
                lucide.createIcons();
            });

            // Add some interactivity
            document.addEventListener("DOMContentLoaded", () => {
                document.querySelectorAll(".result-item").forEach((item) => {
                    item.addEventListener("mouseenter", () => {
                        item.style.transform = "scale(1.02)";
                    });

                    item.addEventListener("mouseleave", () => {
                        item.style.transform = "scale(1)";
                    });
                });
            });
        </script>
    </body>
</html>
